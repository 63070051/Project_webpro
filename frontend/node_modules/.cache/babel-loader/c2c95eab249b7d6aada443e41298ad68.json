{"remainingRequest":"/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/node_modules/babel-loader/lib/index.js!/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/src/views/blogs/CreateBlog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/src/views/blogs/CreateBlog.vue","mtime":1649424131671},{"path":"/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1649416185770},{"path":"/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/node_modules/babel-loader/lib/index.js","mtime":1649416188319},{"path":"/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1649416185770},{"path":"/Users/tathus/Documents/web pro/WEEK11-2-EXERCISE/frontend/node_modules/vue-loader/lib/index.js","mtime":1649416188001}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJsb2c6IHt9LAogICAgICBlcnJvcjogbnVsbCwKICAgICAgaW1hZ2VzOiBbXSwKICAgICAgLy8gYXJyYXkgb2YgaW1hZ2UKICAgICAgdGl0bGVCbG9nOiAiIiwKICAgICAgY29udGVudEJsb2c6ICIiLAogICAgICBwaW5uZWRCbG9nOiBmYWxzZSwKICAgICAgc3RhdHVzQmxvZzogIjAxIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNlbGVjdEltYWdlczogZnVuY3Rpb24gc2VsZWN0SW1hZ2VzKGV2ZW50KSB7CiAgICAgIHRoaXMuaW1hZ2VzID0gZXZlbnQudGFyZ2V0LmZpbGVzOwogICAgfSwKICAgIHNob3dTZWxlY3RJbWFnZTogZnVuY3Rpb24gc2hvd1NlbGVjdEltYWdlKGltYWdlKSB7CiAgICAgIC8vIGZvciBwcmV2aWV3IG9ubHkKICAgICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwoaW1hZ2UpOwogICAgfSwKICAgIGRlbGV0ZVNlbGVjdEltYWdlOiBmdW5jdGlvbiBkZWxldGVTZWxlY3RJbWFnZShpbmRleCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLmltYWdlcyk7CiAgICAgIHRoaXMuaW1hZ2VzID0gQXJyYXkuZnJvbSh0aGlzLmltYWdlcyk7CiAgICAgIHRoaXMuaW1hZ2VzLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgc3VibWl0QmxvZzogZnVuY3Rpb24gc3VibWl0QmxvZygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoInRpdGxlIiwgdGhpcy50aXRsZUJsb2cpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImNvbnRlbnQiLCB0aGlzLmNvbnRlbnRCbG9nKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJwaW5uZWQiLCB0aGlzLnBpbm5lZEJsb2cgPyAxIDogMCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgic3RhdHVzIiwgIjAxIik7CiAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJteUltYWdlIiwgaW1hZ2UpOwogICAgICB9KTsgLy8gTm90ZSAqKioqKioqKioqKioqKioKICAgICAgLy8g4LiV4Lit4LiZ4LmA4Lij4Liy4Lii4Li04LiHIFBvc3RtYW50IOC4iOC4sOC5g+C4iuC5iSBmcm9tRGF0YQogICAgICAvLyDguJXguK3guJnguKLguLTguIfguKvguKXguLLguKIg4LmGIOC4o+C4ueC4m+C4nuC4o+C5ieC4reC4oeC4geC4seC4meC5g+C4mSBQb3N0bWFuIOC4iOC4sOC5gOC4m+C5h+C4meC5geC4muC4muC4meC4teC5iQogICAgICAvLyB0aXRsZSAgIHwgIlRoaXMgaXMgYSB0aXRsZSBvZiBibG9nIgogICAgICAvLyBjb21tZW50IHwgImNvbW1lbnQgaW4gYmxvZyIKICAgICAgLy8gLi4uCiAgICAgIC8vIG15SW1hZ2UgfCBbc2VsZWN0IGZpbGUgMV0KICAgICAgLy8gbXlJbWFnZSB8IFtzZWxlY3QgZmlsZSAyXQogICAgICAvLyBteUltYWdlIHwgW3NlbGVjdCBmaWxlIDNdCiAgICAgIC8vIOC4iOC4sOC4quC4seC4h+C5gOC4geC4leC4uOC4p+C5iOC4suC5g+C4iuC5iSBteUltYWdlIOC5gOC4m+C5h+C4mSBrZXkg4LmA4LiU4Li14Lii4Lin4LiB4Lix4LiZIOC5gOC4peC4ouC4leC5ieC4reC4h+C5gOC4reC4suC4oeC4siBsb29wIGZvckVhY2gKICAgICAgLy8g4Lie4Lit4LmE4Lib4Lid4Lix4LmI4LiHIGJhY2tlbmQg4Lih4Lix4LiZ4LiI4Liw4LiI4Lix4LiUIGZpbGUg4LmD4Lir4LmJ4LmA4Lib4LmH4LiZIEFycmF5IOC5gOC4nuC4t+C5iOC4reC5gOC4reC4suC5hOC4m+C5g+C4iuC5ieC4h+C4suC4meC4leC5iOC4reC5hOC4lOC5iQoKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2Jsb2dzIiwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHJldHVybiBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ2hvbWUnCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGUucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["CreateBlog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAGA;AACA,MAAA,SAAA,EAAA,EAJA;AAKA,MAAA,WAAA,EAAA,EALA;AAMA,MAAA,UAAA,EAAA,KANA;AAOA,MAAA,UAAA,EAAA;AAPA,KAAA;AASA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,KADA,EACA;AACA,WAAA,MAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA;AACA,KAHA;AAIA,IAAA,eAJA,2BAIA,KAJA,EAIA;AACA;AACA,aAAA,GAAA,CAAA,eAAA,CAAA,KAAA,CAAA;AACA,KAPA;AAQA,IAAA,iBARA,6BAQA,KARA,EAQA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA;AACA,WAAA,MAAA,GAAA,KAAA,CAAA,IAAA,CAAA,KAAA,MAAA,CAAA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,KAZA;AAaA,IAAA,UAbA,wBAaA;AAAA;;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA,SAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA,WAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,KAAA,UAAA,GAAA,CAAA,GAAA,CAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,IAAA;AACA,WAAA,MAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,QAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA;AACA,OAFA,EANA,CAUA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEA,MAAA,KAAA,CACA,IADA,CACA,6BADA,EACA,QADA,EAEA,IAFA,CAEA,UAAA,GAAA;AAAA,eAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA,CAAA;AAAA,OAFA,EAGA,KAHA,CAGA,UAAA,CAAA;AAAA,eAAA,OAAA,CAAA,GAAA,CAAA,CAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AAAA,OAHA;AAIA;AAzCA;AAZA,CAAA","sourcesContent":["<template>\n  <div class=\"container is-widescreen\">\n    <section class=\"section\" v-if=\"error\">\n      <div class=\"container is-widescreen\">\n        <div class=\"notification is-danger\">\n          <!-- <%= error.code + ': ' + error.sqlMessage %> -->\n          <!---->\n          {{ error }}\n        </div>\n      </div>\n    </section>\n    <section class=\"hero\">\n      <div class=\"hero-body\">\n        <p class=\"title\">Create new Blog</p>\n      </div>\n    </section>\n    <section class=\"px-6\">\n      <input\n        class=\"mb-5\"\n        multiple\n        type=\"file\"\n        accept=\"image/png, image/jpeg, image/webp\"\n        @change=\"selectImages\"\n      />\n\n      <div v-if=\"images\" class=\"columns is-multiline\">\n        <div v-for=\"(image, index) in images\" :key=\"image.id\" class=\"column is-one-quarter\">\n          <div class=\"card\">\n            <div class=\"card-image\">\n              <figure class=\"image is-4by3\">\n                <img :src=\"showSelectImage(image)\" alt=\"Placeholder image\" />\n              </figure>\n            </div>\n            <footer class=\"card-footer\">\n              <a @click=\"deleteSelectImage(index)\" class=\"card-footer-item has-text-danger\">Delete</a>\n            </footer>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"field mt-5\">\n        <label class=\"label\">Title</label>\n        <div class=\"control\">\n          <input v-model=\"titleBlog\" class=\"input\" type=\"text\" placeholder=\"Text input\" />\n        </div>\n      </div>\n\n      <div class=\"field\">\n        <label class=\"label\">Content</label>\n        <div class=\"control\">\n          <textarea v-model=\"contentBlog\" class=\"textarea\" placeholder=\"Textarea\"></textarea>\n        </div>\n      </div>\n\n      <div class=\"control mb-3\">\n        <label class=\"radio\">\n          <input v-model=\"statusBlog\" type=\"radio\" name=\"answer\" value=\"01\" />\n          Private\n        </label>\n        <label class=\"radio\">\n          <input v-model=\"statusBlog\" type=\"radio\" name=\"answer\" value=\"02\" />\n          Public\n        </label>\n      </div>\n\n      <div class=\"field\">\n        <div class=\"control\">\n          <label class=\"checkbox\">\n            <input v-model=\"pinnedBlog\" type=\"checkbox\" />\n            Pinned\n          </label>\n        </div>\n      </div>\n\n      <div class=\"field is-grouped\">\n        <div class=\"control\">\n          <button @click=\"submitBlog\" class=\"button is-link\">Submit</button>\n        </div>\n        <div class=\"control\">\n          <button @click=\"$router.go(-1)\" class=\"button is-link is-light\">Cancel</button>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      blog: {},\n      error: null,\n      images: [], // array of image\n      titleBlog: \"\",\n      contentBlog: \"\",\n      pinnedBlog: false,\n      statusBlog: \"01\",\n    };\n  },\n  methods: {\n    selectImages(event) {\n      this.images = event.target.files;\n    },\n    showSelectImage(image) {\n      // for preview only\n      return URL.createObjectURL(image);\n    },\n    deleteSelectImage(index) {\n      console.log(this.images);\n      this.images = Array.from(this.images);\n      this.images.splice(index, 1);\n    },\n    submitBlog() {\n      let formData = new FormData();\n      formData.append(\"title\", this.titleBlog);\n      formData.append(\"content\", this.contentBlog);\n      formData.append(\"pinned\", this.pinnedBlog ? 1 : 0);\n      formData.append(\"status\", \"01\");\n      this.images.forEach((image) => {\n        formData.append(\"myImage\", image);\n      });\n\n      // Note ***************\n      // ตอนเรายิง Postmant จะใช้ fromData\n      // ตอนยิงหลาย ๆ รูปพร้อมกันใน Postman จะเป็นแบบนี้\n\n      // title   | \"This is a title of blog\"\n      // comment | \"comment in blog\"\n      // ...\n      // myImage | [select file 1]\n      // myImage | [select file 2]\n      // myImage | [select file 3]\n\n      // จะสังเกตุว่าใช้ myImage เป็น key เดียวกัน เลยต้องเอามา loop forEach\n      // พอไปฝั่ง backend มันจะจัด file ให้เป็น Array เพื่อเอาไปใช้งานต่อได้\n\n      axios\n        .post(\"http://localhost:3000/blogs\", formData)\n        .then((res) => this.$router.push({name: 'home'}))\n        .catch((e) => console.log(e.response.data));\n    },\n  },\n};\n</script>\n\n<style>\n</style>"],"sourceRoot":"src/views/blogs"}]}